[gd_scene load_steps=13 format=3 uid="uid://cgqv10o2bqa6e"]

[ext_resource type="Shader" path="res://main/ps1.gdshader" id="1_5sj4b"]
[ext_resource type="PackedScene" uid="uid://cxuqii21uhkgn" path="res://player_character/player_character.tscn" id="1_7df3e"]
[ext_resource type="PackedScene" uid="uid://bjf5xi65vyk4t" path="res://npc_character/npc_kecsi.tscn" id="2_o13f6"]
[ext_resource type="JSON" path="res://interaction_system/screen_play_library/test.json" id="3_sgyjp"]
[ext_resource type="JSON" path="res://interaction_system/screen_play_library/test2.json" id="4_2ilum"]
[ext_resource type="PackedScene" uid="uid://c7xublrnupds4" path="res://heightmap_terrain/collisionmap/collisionmap.tscn" id="5_0gt1r"]
[ext_resource type="PackedScene" uid="uid://cl83dbc272gjk" path="res://heightmap_terrain/clipmap/clipmap.tscn" id="6_2ftjs"]
[ext_resource type="PackedScene" uid="uid://bjchdwptgp0gf" path="res://npc_character/npc_bari.tscn" id="6_8no5a"]
[ext_resource type="PackedScene" uid="uid://dkk55x74y3twk" path="res://npc_character/npc_boci.tscn" id="7_ptaj6"]

[sub_resource type="NavigationMesh" id="NavigationMesh_1ok5s"]
vertices = PackedVector3Array(9.24677, -5.64716, 4.66907, 9.74677, -5.64716, 0.669067, 9.74677, -5.64716, -7.33093, 2.24677, -5.64716, 7.41907, 9.74677, -5.64716, 0.669067, 9.24677, -5.64716, 4.66907, 10.4968, -5.64716, 4.91907, 17.7468, -5.64716, 0.669067, 17.7468, -5.64716, 0.669067, 255.497, -5.64716, 255.419, 255.497, -5.64716, -255.581, 17.4968, -5.64716, -7.58093, 17.7468, -5.64716, 0.669067, 10.4968, -5.64716, 4.91907, 10.4968, -5.64716, 6.16907, 255.497, -5.64716, 255.419, 255.497, -5.64716, -255.581, -255.503, -5.64716, -255.581, 9.74677, -5.64716, -7.33093, 17.4968, -5.64716, -7.58093, 2.74677, -5.64716, 8.91907, 2.24677, -5.64716, 7.41907, -255.503, -5.64716, 255.419, 2.74677, -5.64716, 8.91907, -255.503, -5.64716, 255.419, 255.497, -5.64716, 255.419, 3.99677, -5.64716, 8.91907, -255.503, -5.64716, -255.581, -255.503, -5.64716, 255.419, 2.24677, -5.64716, 7.41907, 9.74677, -5.64716, -7.33093, 10.4968, -5.64716, 6.16907, 3.99677, -5.64716, 8.91907, 255.497, -5.64716, 255.419)
polygons = [PackedInt32Array(0, 3, 1), PackedInt32Array(1, 3, 2), PackedInt32Array(5, 4, 6), PackedInt32Array(6, 4, 7), PackedInt32Array(11, 10, 8), PackedInt32Array(8, 10, 9), PackedInt32Array(13, 12, 14), PackedInt32Array(14, 12, 15), PackedInt32Array(19, 18, 16), PackedInt32Array(16, 18, 17), PackedInt32Array(22, 21, 20), PackedInt32Array(26, 25, 23), PackedInt32Array(23, 25, 24), PackedInt32Array(29, 28, 30), PackedInt32Array(30, 28, 27), PackedInt32Array(33, 32, 31)]
sample_partition_type = 2
region_min_size = 30.0
region_merge_size = 0.0

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ru2e4"]
shader = ExtResource("1_5sj4b")
shader_parameter/color_depth = 5
shader_parameter/dithering = true
shader_parameter/resolution_scale = 4

[sub_resource type="Environment" id="Environment_gd0u0"]
ambient_light_source = 2
ambient_light_color = Color(0.329412, 0.262745, 0, 1)
tonemap_mode = 2
ssr_fade_in = 0.47075
ssr_fade_out = 1.10957
ssao_enabled = true
ssao_radius = 2.88
ssao_intensity = 4.85
ssao_detail = 0.0
ssao_sharpness = 0.0
ssao_light_affect = 0.38
fog_enabled = true
fog_light_color = Color(0.709804, 0.737255, 0.780392, 1)
fog_light_energy = 0.13
fog_sun_scatter = 0.11
fog_height_density = 16.0
adjustment_enabled = true
adjustment_brightness = 1.22
adjustment_contrast = 1.22
adjustment_saturation = 1.11

[node name="TestSceen" type="Node3D"]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.713544, 0.70061, 0, -0.70061, 0.713544, 0, 11.1794, 0)
light_energy = 0.111
shadow_enabled = true

[node name="CSGBox3D2" type="CSGBox3D" parent="."]
transform = Transform3D(0.346821, 0, -0.937931, 0, 1, 0, 0.937931, 0, 0.346821, 6.43928, 6.61156, 6.84878)
size = Vector3(0.517029, 12.1229, 7.2583)

[node name="CSGBox3D" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 13.8099, 6.63273, -3.20798)
size = Vector3(6.85828, 12.1229, 7.2583)

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.00322485, 9.15191, 0.0143633)
navigation_mesh = SubResource("NavigationMesh_1ok5s")

[node name="SubViewportContainer" type="SubViewportContainer" parent="."]
material = SubResource("ShaderMaterial_ru2e4")
offset_right = 1152.0
offset_bottom = 648.0
metadata/_edit_use_anchors_ = true

[node name="SubViewport" type="SubViewport" parent="SubViewportContainer"]
handle_input_locally = false
size = Vector2i(1152, 648)
render_target_update_mode = 4

[node name="PlayerCharacter" parent="SubViewportContainer/SubViewport" instance=ExtResource("1_7df3e")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3.7765, 0)

[node name="NpcKecsi" parent="." node_paths=PackedStringArray("player_character") instance=ExtResource("2_o13f6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3.73025, 6.38831)
player_character = NodePath("../SubViewportContainer/SubViewport/PlayerCharacter")
hostile = false
stationary = true
screen_play_path = ExtResource("3_sgyjp")

[node name="NpcKecsi2" parent="." node_paths=PackedStringArray("player_character") instance=ExtResource("2_o13f6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3.51171, -2.55053)
player_character = NodePath("../SubViewportContainer/SubViewport/PlayerCharacter")
hostile = false
stationary = true
screen_play_path = ExtResource("4_2ilum")

[node name="NpcKecsi3" parent="." node_paths=PackedStringArray("player_character") instance=ExtResource("6_8no5a")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7.52359, 3.78599, 0)
player_character = NodePath("../SubViewportContainer/SubViewport/PlayerCharacter")
hostile = false
screen_play_path = ExtResource("3_sgyjp")

[node name="NpcBoci" parent="." node_paths=PackedStringArray("player_character") instance=ExtResource("7_ptaj6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 12.1478, 3.90384, 0)
player_character = NodePath("../SubViewportContainer/SubViewport/PlayerCharacter")
ATTACK_RANGE = 8.0

[node name="NpcBoci2" parent="." node_paths=PackedStringArray("player_character") instance=ExtResource("7_ptaj6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.12011, 5.17421, 0)
player_character = NodePath("../SubViewportContainer/SubViewport/PlayerCharacter")

[node name="StaticBody3D" type="StaticBody3D" parent="."]

[node name="Clipmap" parent="StaticBody3D" node_paths=PackedStringArray("player_character") instance=ExtResource("6_2ftjs")]
player_character = NodePath("../../SubViewportContainer/SubViewport/PlayerCharacter")

[node name="Collisionmap" parent="StaticBody3D" node_paths=PackedStringArray("physics_body") instance=ExtResource("5_0gt1r")]
physics_body = NodePath("../../SubViewportContainer/SubViewport/PlayerCharacter")

[node name="Collisionmap2" parent="StaticBody3D" node_paths=PackedStringArray("physics_body") instance=ExtResource("5_0gt1r")]
physics_body = NodePath("../../NpcKecsi")

[node name="Collisionmap3" parent="StaticBody3D" node_paths=PackedStringArray("physics_body") instance=ExtResource("5_0gt1r")]
physics_body = NodePath("../../NpcKecsi2")

[node name="Collisionmap4" parent="StaticBody3D" node_paths=PackedStringArray("physics_body") instance=ExtResource("5_0gt1r")]
physics_body = NodePath("../../NpcKecsi3")

[node name="Collisionmap5" parent="StaticBody3D" node_paths=PackedStringArray("physics_body") instance=ExtResource("5_0gt1r")]
physics_body = NodePath("../../NpcBoci")

[node name="Collisionmap6" parent="StaticBody3D" node_paths=PackedStringArray("physics_body") instance=ExtResource("5_0gt1r")]
physics_body = NodePath("../../NpcBoci2")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_gd0u0")
