[gd_scene load_steps=13 format=3 uid="uid://c5i423flllsbb"]

[ext_resource type="Script" path="res://game_controller.gd" id="1_qy3ry"]
[ext_resource type="PackedScene" uid="uid://cl83dbc272gjk" path="res://heightmap_terrain/clipmap/clipmap.tscn" id="2_tpuik"]
[ext_resource type="Shader" path="res://main/ps1.gdshader" id="3_ef26b"]
[ext_resource type="PackedScene" uid="uid://c7xublrnupds4" path="res://heightmap_terrain/collisionmap/collisionmap.tscn" id="3_mt7pj"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_waph5"]
sky_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)
ground_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)

[sub_resource type="Sky" id="Sky_bvx77"]
sky_material = SubResource("ProceduralSkyMaterial_waph5")

[sub_resource type="Environment" id="Environment_fef4u"]
background_mode = 2
sky = SubResource("Sky_bvx77")
ambient_light_source = 2
ambient_light_color = Color(0.992157, 0.988235, 0.952941, 1)
ambient_light_energy = 0.24
tonemap_mode = 2
ssao_enabled = true
ssao_intensity = 6.94
ssao_detail = 0.0
ssao_sharpness = 0.0
ssil_radius = 12.05
glow_intensity = 3.27
glow_strength = 1.35
glow_bloom = 0.22
adjustment_enabled = true
adjustment_brightness = 1.12
adjustment_contrast = 1.12
adjustment_saturation = 1.94

[sub_resource type="NavigationMesh" id="NavigationMesh_7u2oa"]
vertices = PackedVector3Array(-255.5, -17.5856, -255.567, -255.5, -17.5856, 255.433, 255.5, -17.5856, 255.433, 255.5, -17.5856, -255.567)
polygons = [PackedInt32Array(3, 2, 0), PackedInt32Array(0, 2, 1)]
agent_max_slope = 60.0


[sub_resource type="ShaderMaterial" id="ShaderMaterial_w0ufq"]
shader = ExtResource("3_ef26b")
shader_parameter/color_depth = 5
shader_parameter/dithering = true
shader_parameter/resolution_scale = 4


[node name="TestScene" type="Node3D"]

[node name="StaticBody3D" type="StaticBody3D" parent="."]

[node name="Clipmap" parent="StaticBody3D" node_paths=PackedStringArray("player_character") instance=ExtResource("2_tpuik")]
player_character = NodePath("../../DirectionalLight3D/SubViewportContainer/SubViewport/TestPlayer")

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 21.9133, 0)
navigation_mesh = SubResource("NavigationMesh_7u2oa")
script = ExtResource("1_cfrc6")

[node name="Collisionmap" parent="StaticBody3D" node_paths=PackedStringArray("physics_body") instance=ExtResource("3_mt7pj")]
physics_body = NodePath("../../PlayerCharacter")

[node name="Clipmap" parent="StaticBody3D" node_paths=PackedStringArray("player_character") instance=ExtResource("2_tpuik")]
player_character = NodePath("../../PlayerCharacter")

[node name="Collisionmap2" parent="StaticBody3D" node_paths=PackedStringArray("physics_body") instance=ExtResource("3_mt7pj")]
physics_body = NodePath("../../NpcCharacter")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]

[node name="SubViewportContainer" type="SubViewportContainer" parent="DirectionalLight3D"]
visible = false
material = SubResource("ShaderMaterial_w0ufq")
offset_right = 1152.0
offset_bottom = 648.0
metadata/_edit_use_anchors_ = true


[node name="TestNpc" parent="." instance=ExtResource("4_mlad7")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5.82808, -22.9022)
player_node_path = NodePath("../DirectionalLight3D/SubViewportContainer/SubViewport/TestPlayer")

[node name="TestNpc2" parent="." instance=ExtResource("4_mlad7")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.22321, 4.82497, -14.6244)
player_node_path = NodePath("../DirectionalLight3D/SubViewportContainer/SubViewport/TestPlayer")

[node name="TestNpc3" parent="." instance=ExtResource("4_mlad7")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 11.6683, 5.07339, -12.4991)
player_node_path = NodePath("../DirectionalLight3D/SubViewportContainer/SubViewport/TestPlayer")

[node name="TestNpc4" parent="." instance=ExtResource("4_mlad7")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 11.4293, 4.82497, -20.9095)
player_node_path = NodePath("../DirectionalLight3D/SubViewportContainer/SubViewport/TestPlayer")

[node name="TestNpc5" parent="." instance=ExtResource("4_mlad7")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.02125, 4.82497, -5.4276)
player_node_path = NodePath("../DirectionalLight3D/SubViewportContainer/SubViewport/TestPlayer")

[node name="TestNpc6" parent="." instance=ExtResource("7_lp0nr")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.25962, 4.48799, -21.5356)
player_node_path = NodePath("../DirectionalLight3D/SubViewportContainer/SubViewport/TestPlayer")

[node name="TestNpc7" parent="." instance=ExtResource("7_lp0nr")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 12.4331, 4.48799, -28.0843)
player_node_path = NodePath("../DirectionalLight3D/SubViewportContainer/SubViewport/TestPlayer")

[node name="TestNpc8" parent="." instance=ExtResource("7_lp0nr")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.806, 4.48799, -17.6505)
player_node_path = NodePath("../DirectionalLight3D/SubViewportContainer/SubViewport/TestPlayer")

[node name="TestNpc9" parent="." instance=ExtResource("7_lp0nr")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6.96198, 4.48799, -12.1937)
player_node_path = NodePath("../DirectionalLight3D/SubViewportContainer/SubViewport/TestPlayer")
