[gd_scene load_steps=12 format=3 uid="uid://c5i423flllsbb"]

[ext_resource type="Script" path="res://make_nav_mesh.gd" id="1_cfrc6"]
[ext_resource type="PackedScene" uid="uid://bu3vtmwnoul1u" path="res://test_character/test_player.tscn" id="1_ltpxc"]
[ext_resource type="PackedScene" uid="uid://cl83dbc272gjk" path="res://heightmap_terrain/clipmap/clipmap.tscn" id="2_tpuik"]
[ext_resource type="Shader" path="res://main/ps1.gdshader" id="3_ef26b"]
[ext_resource type="PackedScene" uid="uid://c7xublrnupds4" path="res://heightmap_terrain/collisionmap/collisionmap.tscn" id="3_mt7pj"]
[ext_resource type="PackedScene" uid="uid://c1y4wcrfbfswi" path="res://test_character/test_npc.tscn" id="4_mlad7"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_waph5"]
sky_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)
ground_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)

[sub_resource type="Sky" id="Sky_bvx77"]
sky_material = SubResource("ProceduralSkyMaterial_waph5")

[sub_resource type="Environment" id="Environment_fef4u"]
background_mode = 2
sky = SubResource("Sky_bvx77")
ambient_light_source = 2
ambient_light_color = Color(0.992157, 0.988235, 0.952941, 1)
ambient_light_energy = 0.24
tonemap_mode = 2
ssao_enabled = true
ssao_intensity = 6.94
ssao_detail = 0.0
ssao_sharpness = 0.0
ssil_radius = 12.05
glow_intensity = 3.27
glow_strength = 1.35
glow_bloom = 0.22
adjustment_enabled = true
adjustment_brightness = 1.12
adjustment_contrast = 1.12
adjustment_saturation = 1.94

[sub_resource type="NavigationMesh" id="NavigationMesh_7u2oa"]
geometry_parsed_geometry_type = 2
agent_max_slope = 60.0

[sub_resource type="ShaderMaterial" id="ShaderMaterial_w0ufq"]
shader = ExtResource("3_ef26b")
shader_parameter/color_depth = 5
shader_parameter/dithering = true
shader_parameter/resolution_scale = 4

[node name="TestScene" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_fef4u")

[node name="StaticBody3D" type="StaticBody3D" parent="."]

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3.07476, 0)
navigation_mesh = SubResource("NavigationMesh_7u2oa")
script = ExtResource("1_cfrc6")

[node name="Clipmap" parent="StaticBody3D/NavigationRegion3D" node_paths=PackedStringArray("player_character") instance=ExtResource("2_tpuik")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -3.07476, 0)
player_character = NodePath("../../../DirectionalLight3D/SubViewportContainer/SubViewport/TestPlayer")

[node name="Collisionmap" parent="StaticBody3D" node_paths=PackedStringArray("physics_body") instance=ExtResource("3_mt7pj")]
physics_body = NodePath("../../DirectionalLight3D/SubViewportContainer/SubViewport/TestPlayer")

[node name="Collisionmap2" parent="StaticBody3D" node_paths=PackedStringArray("physics_body") instance=ExtResource("3_mt7pj")]
physics_body = NodePath("../../TestNpc")

[node name="Collisionmap3" parent="StaticBody3D" node_paths=PackedStringArray("physics_body") instance=ExtResource("3_mt7pj")]
physics_body = NodePath("../../TestNpc2")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]

[node name="SubViewportContainer" type="SubViewportContainer" parent="DirectionalLight3D"]
material = SubResource("ShaderMaterial_w0ufq")
offset_right = 1152.0
offset_bottom = 648.0
metadata/_edit_use_anchors_ = true

[node name="SubViewport" type="SubViewport" parent="DirectionalLight3D/SubViewportContainer"]
handle_input_locally = false
size = Vector2i(1152, 648)
render_target_update_mode = 4

[node name="TestPlayer" parent="DirectionalLight3D/SubViewportContainer/SubViewport" instance=ExtResource("1_ltpxc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.33292, 0)

[node name="TestNpc" parent="." instance=ExtResource("4_mlad7")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5.82808, -22.9022)
player_node_path = NodePath("../DirectionalLight3D/SubViewportContainer/SubViewport/TestPlayer")

[node name="TestNpc2" parent="." instance=ExtResource("4_mlad7")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5.18886, 22.947)
player_node_path = NodePath(".")
